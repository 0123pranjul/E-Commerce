@using System.Text.Json

<!DOCTYPE html>
<html>
<head>
    <title>Registration Form</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
        .card {
            max-width: 600px;
            margin: 20px auto;
        }

        .form-label {
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="card shadow">
            <div class="card-header bg-primary text-white">
                <h2 class="mb-0">Registration Form</h2>
            </div>
            <div class="card-body">
                <form asp-action="Submit" method="post" class="row g-3">
                    @foreach (var field in ViewBag.Fields as List<FormField>)
                    {
                        <div class="col-12">
                            <label class="form-label">@field.Name @(field.IsRequired ? "<span class='text-danger'>*</span>" : "")</label>
                            @if (field.Type == "textarea")
                            {
                                <textarea name="@field.Name" class="form-control" rows="4" @(field.IsRequired ? "required" : "")></textarea>
                            }
                            else if (field.Type == "checkbox")
                            {
                                <div class="form-check">
                                    <input type="checkbox" name="@field.Name" value="true" class="form-check-input" @(field.IsRequired ? "required" : "") />
                                    <label class="form-check-label">@field.Name</label>
                                </div>
                            }
                            else if (field.Type == "dropdown")
                            {
                                <select name="@field.Name" class="form-select" @(field.IsRequired ? "required" : "")>
                                    <option value="">Select an option</option>
                                    @foreach (var option in field.GetOptionsList())
                                    {
                                        <option value="@option">@option</option>
                                    }
                                </select>
                            }
                            else if (field.Type == "radio")
                            {
                                @foreach (var option in field.GetOptionsList())
                                {
                                    <div class="form-check">
                                        <input type="radio" name="@field.Name" value="@option" class="form-check-input" @(field.IsRequired ? "required" : "") />
                                        <label class="form-check-label">@option</label>
                                    </div>
                                }
                            }
                            else
                            {
                                <input type="@field.Type" name="@field.Name" class="form-control" @(field.IsRequired ? "required" : "") />
                            }
                        </div>
                    }
                    <div class="col-12">
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</body>
</html>